{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <title>Pagamento confirmado ‚Ä¢ {{ inscricao.evento.nome }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root{
      --ok:#16a34a; --ok-2:#22c55e;
      --brand:#4f7cff; --bg:#0b1020; --card:#11162a;
      --text:#f4f6fb; --muted:#c1c7d3; --line:rgba(255,255,255,.08);
      --shadow:0 18px 50px rgba(0,0,0,.35);
      --chip:rgba(255,255,255,.06);
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f3f5f9; --card:#ffffff; --text:#0e1320; --muted:#5b6473;
        --line:#eef2f7; --shadow:0 16px 36px rgba(10,36,99,.10);
        --chip:#f5f7fb;
      }
    }

    /* ===== Reset e conten√ß√£o para evitar scroll lateral ===== */
    *{ box-sizing:border-box; min-width:0 }
    html, body{ width:100%; overflow-x:hidden }
    img, svg, video, canvas{ max-width:100%; height:auto }

    body{
      margin:0;
      background:
        radial-gradient(1200px 1200px at 10% -10%, rgba(79,124,255,.16), transparent 40%),
        radial-gradient(1200px 1200px at 110% 10%, rgba(34,197,94,.16), transparent 40%),
        var(--bg);
      color:var(--text);
      font:15px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif; /* -1px para compactar */
      min-height:100dvh; display:grid; place-items:center; padding:20px 12px; /* padding menor */
    }

    .wrap{
      width:100%;
      max-width:720px; /* mais estreito e central */
      margin-inline:auto;
    }

    .card{
      background:var(--card); border-radius:20px; overflow:hidden;
      box-shadow:var(--shadow); outline:1px solid var(--line);
    }

    .hero{
      display:flex; gap:12px; align-items:center; padding:18px 16px; border-bottom:1px solid var(--line);
      position:relative; isolation:isolate;
    }
    .hero::after{
      content:""; position:absolute; inset:0; z-index:-1; opacity:.20;
      background:linear-gradient(90deg, rgba(34,197,94,.25), rgba(79,124,255,.25));
    }
    .badge{
      width:48px; height:48px; border-radius:50%;
      display:grid; place-items:center;
      background:radial-gradient(circle at 30% 30%, var(--ok-2), var(--ok));
      box-shadow:0 0 0 5px rgba(34,197,94,.18);
      color:#fff; font-size:24px; font-weight:900;
      animation:pop .38s ease-out both;
      flex:0 0 auto;
    }
    @keyframes pop{ 0%{ transform:scale(.75); opacity:.5 } 100%{ transform:scale(1); opacity:1 } }

    h1{ margin:0 0 2px; font-size:clamp(18px, 2.6vw, 22px); letter-spacing:.2px }
    .sub{ margin:0; color:var(--muted); font-size:.93rem; line-height:1.4 }

    .body{ padding:16px } /* corpo mais compacto */

    /* ===== Grid fluida sem quebrar a tela ===== */
    .grid{
      display:grid; gap:10px;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); /* auto-fit compacto */
      align-items:stretch;
    }

    .item{
      background:var(--chip); border-radius:12px; padding:10px;
      outline:1px solid var(--line);
    }
    .item small{ display:block; color:var(--muted); margin-bottom:4px; font-size:.83rem }
    .item b{
      color:var(--text); font-size:.96rem; line-height:1.3;
      word-break:break-word; overflow-wrap:anywhere; /* evita overflow de nomes enormes */
    }

    .status-row{
      margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;
    }
    .chip{
      padding:6px 10px; border-radius:999px; background:var(--chip);
      outline:1px solid var(--line);
      font-weight:700; font-size:.82rem; letter-spacing:.2px; color:var(--text);
      max-width:100%; white-space:nowrap; text-overflow:ellipsis; overflow:hidden;
    }
    .chip.ok{ background:rgba(22,163,74,.14); outline:1px solid rgba(22,163,74,.28) }

    .divider{ height:1px; background:var(--line); margin:14px 0 }

    /* ===== Bot√µes mais compactos e responsivos ===== */
    .actions{ display:flex; flex-wrap:wrap; gap:10px }
    .btn{
      appearance:none; border:0; cursor:pointer; text-decoration:none;
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:10px; font-weight:800;
      transition:transform .12s ease, box-shadow .12s ease;
      font-size:.92rem; line-height:1.1;
    }
    .btn-primary{
      background:linear-gradient(135deg, var(--ok-2), var(--ok));
      color:#fff; box-shadow:0 10px 20px rgba(34,197,94,.25);
    }
    .btn-primary:hover{ transform:translateY(-1px) }
    .btn-outline{
      background:linear-gradient(135deg, #2f384a, #202535); color:#e7ebf6; box-shadow:none;
    }
    @media (prefers-color-scheme: light){
      .btn-outline{ background:#fff; color:#111827; border:1px solid #e5e7eb }
    }

    /* empilhar bot√µes no mobile e ocupar largura */
    @media (max-width: 520px){
      .actions .btn{ flex:1 1 100% }
    }

    .note{ margin-top:10px; color:var(--muted); font-size:.9rem }

    /* ===== Confete: limites e menor quantidade em telas pequenas ===== */
    .confetti { position: fixed; inset:0; pointer-events:none; z-index:999; overflow:hidden }
    .confetti i{
      position:absolute; top:-10px; width:8px; height:14px; opacity:.9;
      animation:fall linear forwards; transform:rotate(15deg);
    }
    @keyframes fall{
      to { transform:translateY(110vh) rotate(360deg); opacity:1 }
    }

    /* ===== Melhorias extras de responsividade ===== */
    @media (max-width: 860px){
      .hero{ padding:16px }
    }
    @media (max-width: 380px){
      .badge{ width:42px; height:42px; font-size:22px }
      .sub{ font-size:.9rem }
    }

    /* ===== Modo impress√£o compacto, centralizado ===== */
    @media print{
      body{ background:#fff; padding:0 }
      .wrap{ max-width:720px }
      .card{ box-shadow:none; outline:0; border:1px solid #e5e7eb }
      .hero::after{ display:none }
      .btn{ display:none !important }
      .confetti{ display:none !important }
    }
  </style>
</head>
<body>

  {% include "partials/flash_messages.html" %}

  <div class="wrap">
    <div class="card" role="status" aria-live="polite">
      <div class="hero">
        <div class="badge">‚úì</div>
        <div>
          <h1>Pagamento confirmado!</h1>
          <p class="sub">Sua inscri√ß√£o para <b>{{ inscricao.evento.nome }}</b> foi conclu√≠da com sucesso.</p>
        </div>
      </div>

      <div class="body">
        <div class="grid" aria-label="Resumo da inscri√ß√£o">
          <div class="item">
            <small>Participante</small>
            <b>{{ inscricao.participante.nome }}</b>
          </div>
          <div class="item">
            <small>Evento</small>
            <b>{{ inscricao.evento.nome }}</b>
          </div>
          <div class="item">
            <small>Par√≥quia</small>
            <b>{{ inscricao.paroquia.nome }}</b>
          </div>
          <div class="item">
            <small>Status</small>
            <b>Confirmado</b>
          </div>
        </div>

        <div class="status-row">
          <span class="chip ok">Inscri√ß√£o #{{ inscricao.id }}</span>
          {% with pagamento=inscricao.pagamento %}
            {% if pagamento and pagamento.transacao_id %}
              <span class="chip">Transa√ß√£o: {{ pagamento.transacao_id }}</span>
            {% endif %}
            {% if pagamento and pagamento.valor %}
              <span class="chip">Valor: R$ {{ pagamento.valor|floatformat:2 }}</span>
            {% else %}
              <span class="chip">Valor: R$ {{ inscricao.evento.valor_inscricao|floatformat:2 }}</span>
            {% endif %}
          {% endwith %}
        </div>

        <div class="divider" aria-hidden="true"></div>

        <div class="actions">
          <a class="btn btn-primary" href="{% url 'inscricoes:ver_inscricao' inscricao.id %}">üìÑ Ver detalhes da inscri√ß√£o</a>

          {% comment %}
            Se voc√™ tiver a rota do v√≠deo de boas-vindas, mostramos um CTA:
          {% endcomment %}
          <a class="btn btn-outline" href="{% url 'inscricoes:pagina_video_evento' slug=inscricao.evento.slug %}">
            ‚ñ∂Ô∏è Assistir v√≠deo de boas-vindas
          </a>

          <button class="btn btn-outline" onclick="window.print()">üñ®Ô∏è Imprimir confirma√ß√£o</button>
        </div>

        <p class="note">Voc√™ receber√° um e-mail com orienta√ß√µes finais. Guarde esta p√°gina como comprovante.</p>
      </div>
    </div>
  </div>

  <!-- confete festivo (leve, sem libs) -->
  <div class="confetti" aria-hidden="true" id="confetti"></div>
  <script>
    (function confetti(){
      const root = document.getElementById('confetti');
      const colors = ['#22c55e','#4f7cff','#f59e0b','#ef4444','#10b981','#a78bfa','#f472b6'];
      const isNarrow = window.matchMedia('(max-width:520px)').matches;
      const COUNT = isNarrow ? 40 : 60; /* menos confetes em telas pequenas */
      for (let i=0;i<COUNT;i++){
        const p = document.createElement('i');
        const size = 6 + Math.random()*8;
        p.style.left = (Math.random()*100)+'vw';
        p.style.background = colors[(Math.random()*colors.length)|0];
        p.style.width = size+'px';
        p.style.height = (size*1.3)+'px';
        p.style.animationDuration = (5 + Math.random()*3)+'s';
        p.style.animationDelay = (Math.random()*0.6)+'s';
        p.style.opacity = .85;
        root.appendChild(p);
        setTimeout(()=> p.remove(), 9000);
      }
      setTimeout(()=> root.remove(), 9500);
    })();
  </script>
</body>
</html>
