{% load static %}
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <title>Inscri√ß√£o Conclu√≠da - {{ evento.nome }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        /* Reset simples */
        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
                Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
            max-width: 480px;
            margin: 20px auto;
            padding: 15px;
            background-color: #dadada;
            color: #333;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        header img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .mensagem {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
            text-align: center;
        }

        .mensagem p {
            font-size: 1.1rem;
            margin: 12px 0;
            color: #444;
            line-height: 1.4;
        }

        .imagem-personalizada {
            width: 100%;
            max-height: 1300px;
            object-fit: contain;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .btn-pagar {
            display: inline-block;
            background: #009443;
            color: #fff;
            padding: 12px 24px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: bold;
            margin: 16px auto;
        }

        .btn-pagar:hover {
            opacity: 0.9;
        }

        .info-valor {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 25px;
            background: #fff;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
        }

        .linha-do-tempo {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .linha-do-tempo h2 {
            margin-bottom: 18px;
            font-size: 1.3rem;
            color: #222;
            text-align: center;
        }

        .timeline-step {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-size: 1rem;
            color: #666;
        }

        .timeline-step:last-child {
            margin-bottom: 0;
        }

        .timeline-step::before {
            content: attr(data-step);
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 28px;
            height: 28px;
            margin-right: 15px;
            border-radius: 50%;
            border: 2px solid #999;
            color: #999;
            font-weight: 700;
            background-color: transparent;
        }

        .timeline-step.active {
            color: #2e7d32;
            font-weight: 700;
        }

        .timeline-step.active::before {
            border-color: #2e7d32;
            background-color: #2e7d32;
            color: white;
        }

        .btn-ajuda {
            display: block;
            width: 100%;
            max-width: 320px;
            margin: 0 auto 12px auto;
            color: white;
            padding: 14px;
            font-size: 1.1rem;
            font-weight: 700;
            border: none;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            cursor: pointer;
        }

        .btn-organizacao {
            background-color: #25D366;
            /* Cor do WhatsApp */
        }

        .btn-organizacao:hover {
            background-color: #128C7E;
        }

        .btn-pequeno {
            display: inline-block;
            width: 48%;
            /* Ajuste para ocupar metade da largura */
            margin: 0 auto 12px auto;
            color: white;
            padding: 8px;
            /* Reduzindo o padding */
            font-size: 0.6rem;
            /* Reduzindo a fonte */
            font-weight: 700;
            border: none;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            cursor: pointer;
        }

        .btn-suporte-whatsapp {
            background-color: #128C7E;
            /* Cor do WhatsApp mais escura */
        }

        .btn-suporte-whatsapp:hover {
            background-color: #075E54;
        }

        .btn-suporte-email {
            background-color: #007bff;
            /* Cor padr√£o do bot√£o de ajuda */
        }

        .btn-suporte-email:hover {
            background-color: #0056b3;
        }

        .contatos {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <header>
        {% if evento.banner %}
        <img src="{{ evento.banner.url }}" alt="Banner do Evento {{ evento.nome }}" />
        {% endif %}
    </header>

    <!-- Mensagem inicial -->
    <section class="mensagem" role="main" aria-labelledby="titulo-principal">
        <h1 id="titulo-principal">Parab√©ns! Sua inscri√ß√£o foi enviada.</h1>
        <p>
            <strong>{{ inscricao.participante.nome }}</strong>, voc√™ j√° √© quase um
            {% if evento.tipo == 'senior' %}campista
            {% elif evento.tipo == 'juvenil' %}juvenilista
            {% elif evento.tipo == 'mirim' %}mirinista
            {% elif evento.tipo == 'servos' %}servo
            {% else %}campista{% endif %}!
        </p>
        <p>Voc√™ j√° concluiu a primeira parte, aguarde e fique em ora√ß√£o pelo seu chamado!</p>

        {% if politica.imagem_1 %}
        <img src="{{ politica.imagem_1.url }}" alt="Imagem representativa" class="imagem-personalizada"
            loading="lazy" />
        {% endif %}
    </section>

    {# Bot√£o de pagamento: s√≥ se selecionado e ainda n√£o pagou #}
    {% if inscricao.foi_selecionado and not inscricao.pagamento_confirmado %}
    <div style="text-align:center; margin-bottom:25px;">
        <p>
            üéâ Ficamos imensamente felizes em saber que voc√™ foi selecionado(a)!  
            üôè Deus tem grandes b√™n√ß√£os reservadas para voc√™.
            Para garantir sua vaga, aperte abaixo e realize o pagamento:
        </p>
        <p><strong>Valor da inscri√ß√£o: R$ {{ evento.valor_inscricao|floatformat:2 }}</strong></p>
        <a href="{% url 'inscricoes:iniciar_pagamento' inscricao.id %}" class="btn-pagar" target="_blank"
            rel="noopener" aria-label="Realizar pagamento">
            Realizar Pagamento
        </a>
    </div>
    {% endif %}

    <!-- Info valor e reembolso -->
    <section class="info-valor" aria-label="Informa√ß√µes sobre pagamento e reembolso">
        <p>
            <strong>Importante:</strong> O valor da inscri√ß√£o √© de R$ {{ evento.valor_inscricao|floatformat:2 }}.
        </p>
        <p>
            Em caso de desist√™ncia, consulte nossa pol√≠tica de reembolso no site ou entre em contato conosco.
        </p>
    </section>

    <!-- Linha do tempo -->
    <section class="linha-do-tempo" aria-label="Linha do tempo da inscri√ß√£o">
        <h2>Linha do Tempo da Inscri√ß√£o</h2>
        {% for passo in passos|slice:":4" %}
        {% if forloop.counter <= inscricao_status %}
        <div class="timeline-step active" data-step="{{ forloop.counter }}">
            {{ forloop.counter }}. {{ passo }}
        </div>
        {% else %}
        <div class="timeline-step" data-step="{{ forloop.counter }}">
            {{ forloop.counter }}. {{ passo }}
        </div>
        {% endif %}
        {% endfor %}
    </section>

    <!-- Contatos -->
    <section class="contatos" aria-label="Contatos">
        <a href="https://wa.me/{{ inscricao.paroquia.telefone|slice:'3:' }}"
            class="btn-ajuda btn-organizacao" target="_blank" rel="noopener"
            aria-label="Abrir WhatsApp para contato com a par√≥quia">
            <span role="img" aria-label="WhatsApp"></span> Fale com a Organiza√ß√£o
        </a>

        <div style="display: flex; justify-content: space-between; width: 100%; max-width: 320px; margin: 0 auto;">
            <a href="https://wa.me/5563920013103" class="btn-pequeno btn-suporte-whatsapp" target="_blank"
                rel="noopener" aria-label="Abrir WhatsApp para suporte">
                <span role="img" aria-label="WhatsApp"></span>WhatsApp do Suporte
            </a>
            <a href="mailto:alexandremv.dev@gmail.com" class="btn-pequeno btn-suporte-email"
                aria-label="Enviar email para suporte">
                <span role="img" aria-label="Email"></span>Email do Suporte
            </a>
        </div>
    </section>
</body>

</html>