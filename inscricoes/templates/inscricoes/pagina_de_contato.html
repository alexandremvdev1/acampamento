{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Pagamento indispon√≠vel ‚Ä¢ {{ paroquia.nome|default:"" }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root{
      --bg:#0b1020; --card:#11162a; --text:#f4f6fb; --muted:#c1c7d3; --line:rgba(255,255,255,.10);
      --shadow:0 18px 50px rgba(0,0,0,.35);
      --brand:#4f7cff; --danger:#ef4444; --whats:#25D366; --email:#3b82f6; --neutral:#6b7280;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f3f5f9; --card:#ffffff; --text:#0e1320; --muted:#5b6473; --line:#e9edf5;
        --shadow:0 16px 36px rgba(10,36,99,.10);
      }
    }

    *{ box-sizing:border-box }
    html,body{
      margin:0;
      background:
        radial-gradient(1100px 1100px at -10% -10%, rgba(79,124,255,.16), transparent 40%),
        radial-gradient(1100px 1100px at 110% 10%, rgba(34,197,94,.14), transparent 40%),
        var(--bg);
      color:var(--text);
      font:16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif;
      min-height:100dvh;
    }

    .wrap{
      min-height:100dvh;
      display:grid; place-items:center;
      padding:28px 16px;
    }

    .card{
      width:min(560px, 90vw);
      background:var(--card);
      border-radius:20px;
      box-shadow:var(--shadow);
      outline:1px solid var(--line);
      overflow:hidden;
    }

    .head{
      padding:18px 18px 0; text-align:center;
    }
    .logo{
      max-height:56px; width:auto; object-fit:contain; display:block; margin:0 auto 10px;
      filter: drop-shadow(0 4px 14px rgba(0,0,0,.18));
    }

    .hero{
      padding:18px; text-align:center; border-bottom:1px solid var(--line);
    }
    .emoji{
      width:56px; height:56px; border-radius:50%;
      display:grid; place-items:center; margin:0 auto 8px;
      background:radial-gradient(circle at 30% 30%, #ef4444, #b91c1c);
      color:#fff; font-size:26px; font-weight:900; box-shadow:0 0 0 6px rgba(239,68,68,.18);
    }
    h1{ margin:6px 0 4px; font-size:clamp(18px, 5vw, 24px) }
    .sub{ margin:0; color:var(--muted); }

    .body{ padding:18px; text-align:center }
    .notice{
      margin:10px auto 0; color:var(--muted);
    }

    .actions{
      margin:16px auto 6px;
      display:grid; gap:10px; grid-template-columns:1fr;
      width:100%;
    }
    @media (min-width:520px){ .actions{ grid-template-columns:1fr 1fr } }

    .btn{
      appearance:none; border:0; cursor:pointer; text-decoration:none;
      display:inline-block; padding:12px 14px; border-radius:12px; font-weight:800; text-align:center;
      transition:transform .12s ease, box-shadow .12s ease;
      outline:1px solid var(--line);
      user-select:none; -webkit-tap-highlight-color: transparent;
    }
    .btn:hover{ transform:translateY(-1px) }
    .btn:focus-visible{ outline:2px solid #93c5fd; outline-offset:2px }
    .btn-whats{ background:linear-gradient(135deg, var(--whats), #1ebc59); color:#fff; outline:none; }
    .btn-email{ background:linear-gradient(135deg, var(--email), #215de6); color:#fff; outline:none; }
    .btn-neutral{ background:linear-gradient(135deg, #2f384a, #202535); color:#e7ebf6; }
    @media (prefers-color-scheme: light){
      .btn-neutral{ background:#fff; color:#111827; border:1px solid #e5e7eb; outline:none }
    }

    .paroquia{
      padding:14px 16px; text-align:center; border-top:1px solid var(--line);
      color:var(--muted); font-size:.95rem;
    }
    .paroquia .p-logo{
      max-height:46px; width:auto; object-fit:contain; display:block; margin:0 auto 6px;
    }
    .small{ font-size:.92rem; color:var(--muted); margin-top:6px }

    /* WhatsApp flutuante (opcional) */
    .float-whats{
      position: fixed; bottom:18px; right:18px; z-index: 50;
      width:56px; height:56px; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      background:var(--whats); color:#fff; text-decoration:none;
      box-shadow:0 10px 20px rgba(37,211,102,.35);
    }
    .float-whats:focus-visible{ outline:2px solid #93c5fd; outline-offset:2px }

    /* garante que nada ‚Äúvaze‚Äù da tela */
    img, video{ max-width:100%; height:auto }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="status" aria-live="polite">
      <div class="head">
        {% if politica and politica.logo %}
          <img class="logo" src="{{ politica.logo.url }}" alt="Logo">
        {% elif paroquia and paroquia.logo %}
          <img class="logo" src="{{ paroquia.logo.url }}" alt="Logo da Par√≥quia">
        {% endif %}
      </div>

      <div class="hero">
        <div class="emoji" aria-hidden="true">!</div>
        <h1>Pagamento temporariamente indispon√≠vel</h1>
        <p class="sub">Estamos finalizando a integra√ß√£o com o Mercado Pago.</p>
      </div>

      <div class="body">
        {% if messages %}
          {% for message in messages %}
            <p class="notice">{{ message }}</p>
          {% endfor %}
        {% else %}
          <p class="notice">
            Para garantir sua inscri√ß√£o, fale com a organiza√ß√£o. Responderemos rapidinho. üòä
          </p>
        {% endif %}

        <div class="actions" aria-label="Meios de contato">
          {# WhatsApp da par√≥quia #}
          {% if paroquia and paroquia.telefone %}
            {# remove +55 caso exista; server-side use slice:'3:' costuma funcionar no seu projeto #}
            <a class="btn btn-whats"
               href="https://wa.me/{{ paroquia.telefone|slice:'3:' }}?text=Ol√°!%20Preciso%20de%20ajuda%20para%20concluir%20meu%20pagamento."
               target="_blank" rel="noopener">
              Falar com a equipe
            </a>
          {% else %}
            <a class="btn btn-neutral" href="/" aria-label="Voltar √† p√°gina inicial">Voltar ao in√≠cio</a>
          {% endif %}

          {# Suporte do sistema (WhatsApp) #}
          <a class="btn btn-neutral"
             href="https://wa.me/5563920013103?text=Suporte:%20Pagamento%20indispon√≠vel"
             target="_blank" rel="noopener">
            Suporte via WhatsApp
          </a>

          {# E-mail de suporte #}
          <a class="btn btn-email" href="mailto:alexandremv.dev@gmail.com?subject=Ajuda%20no%20pagamento">
            Suporte por e-mail
          </a>

        <p class="small">
          Se preferir, voc√™ pode realizar o pagamento presencialmente com a secretaria da par√≥quia.
        </p>
      </div>

      <div class="paroquia">
        {% if paroquia and paroquia.logo %}
          <img class="p-logo" src="{{ paroquia.logo.url }}" alt="Logo da Par√≥quia">
        {% endif %}
        {% if paroquia %}
          <div><strong>{{ paroquia.nome }}</strong></div>
          <div>{{ paroquia.cidade }} ‚Ä¢ {{ paroquia.estado }}</div>
          {% if paroquia.telefone %}<div>Tel: {{ paroquia.telefone }}</div>{% endif %}
        {% else %}
          <div><strong>Organiza√ß√£o</strong></div>
          <div>Entre em contato para concluir o pagamento</div>
        {% endif %}
      </div>
    </div>
  </div>

  {# Bot√£o flutuante do WhatsApp da par√≥quia (opcional) #}
  {% if paroquia and paroquia.telefone %}
    <a class="float-whats"
       href="https://wa.me/{{ paroquia.telefone|slice:'3:' }}?text=Ol√°!%20Preciso%20de%20ajuda%20para%20concluir%20meu%20pagamento."
       aria-label="Contato WhatsApp"
       target="_blank" rel="noopener">WA</a>
  {% endif %}
</body>
</html>
